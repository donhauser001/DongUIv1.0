# 主题变量使用指南

本系统通过 CSS 变量实现全站主题控制，所有样式都通过后台配置动态管理。本文档说明如何在开发过程中使用这些主题变量。

## 目录

- [基础概念](#基础概念)
- [颜色变量](#颜色变量)
- [组件样式变量](#组件样式变量)
- [布局变量](#布局变量)
- [字体系统变量](#字体系统变量)
- [使用方式](#使用方式)
- [最佳实践](#最佳实践)

---

## 基础概念

### CSS 变量系统

系统使用 CSS 自定义属性（CSS Variables）来管理所有主题配置。这些变量定义在 `:root` 中，可以在任何地方通过 `var(--variable-name)` 访问。

### 变量命名规范

- **颜色变量**: `--color-*`
- **组件变量**: `--component-*-*` (如 `--btn-primary-*`, `--input-*`)
- **布局变量**: `--layout-*`
- **字体变量**: `--font-*`, `--line-height-*`, `--font-weight-*`

---

## 颜色变量

### 主色系

```css
--color-primary        /* 主色，用于主要按钮、链接、激活状态 */
--color-secondary      /* 辅助色，用于次要强调 */
--color-accent         /* 强调色，用于装饰元素 */
--color-dark           /* 深色，用于特殊卡片背景 */
--color-border         /* 统一边框色 */
```

### 功能色

```css
--color-success        /* 成功状态 */
--color-warning        /* 警告状态 */
--color-error          /* 错误状态 */
--color-info           /* 信息提示 */
```

### 文本色

```css
--color-text-primary   /* 主要文本颜色 */
--color-text-secondary /* 次要文本颜色 */
--color-text-tertiary  /* 辅助文本颜色 */
```

### 背景色

```css
--color-bg-primary     /* 主背景色（通常是白色） */
--color-bg-secondary   /* 次背景色（浅灰） */
--color-bg-tertiary    /* 第三背景色（更浅的灰） */
```

### 使用示例

```html
<!-- 在 HTML 中使用 -->
<div style="background-color: var(--color-primary); color: var(--color-text-primary);">
  内容
</div>

<!-- 在 Vue 模板中使用 -->
<div :style="{ backgroundColor: 'var(--color-primary)', color: 'var(--color-text-primary)' }">
  内容
</div>
```

```css
/* 在 CSS 中使用 */
.my-component {
  background-color: var(--color-primary);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
}

.status-success {
  color: var(--color-success);
}

.status-error {
  color: var(--color-error);
}
```

---

## 组件样式变量

### 按钮变量

#### 主要按钮 (`.btn-primary`)

```css
--btn-primary-height
--btn-primary-padding-x
--btn-primary-padding-y
--btn-primary-radius
--btn-primary-border-width
--btn-primary-border-color
--btn-primary-bg-color
--btn-primary-text-color
--btn-primary-hover-bg-color
--btn-primary-disabled-bg-color
--btn-primary-disabled-text-color
```

#### 次要按钮 (`.btn-outline`)

```css
--btn-outline-height
--btn-outline-padding-x
--btn-outline-padding-y
--btn-outline-radius
--btn-outline-border-width
--btn-outline-border-color
--btn-outline-bg-color
--btn-outline-text-color
--btn-outline-hover-bg-color
--btn-outline-hover-border-color
--btn-outline-hover-text-color
--btn-outline-disabled-bg-color
--btn-outline-disabled-text-color
--btn-outline-disabled-border-color
```

**推荐使用方式**: 直接使用预定义的 CSS 类名 `btn-primary` 或 `btn-outline`。

```html
<!-- ✅ 推荐 -->
<button class="btn-primary">主要按钮</button>
<button class="btn-outline">次要按钮</button>
```

### 输入框变量

```css
--input-height
--input-padding-x
--input-padding-y
--input-radius
--input-border-width
--input-border-color
--input-bg-color
--input-text-color
--input-placeholder-color
--input-focus-border-color
--input-focus-ring-color
--input-disabled-bg-color
--input-disabled-text-color
--input-disabled-border-color
```

**推荐使用方式**: 使用预定义的类名 `.input-base`。

```html
<!-- ✅ 推荐 -->
<input type="text" class="input-base" placeholder="输入内容" />
```

### 表格变量

```css
--table-border-width
--table-border-color
--table-header-bg-color
--table-header-text-color
--table-header-font-weight
--table-row-height
--table-row-padding-x
--table-row-padding-y
--table-cell-border-color
--table-zebra-stripe-color
--table-hover-row-bg-color
```

**推荐使用方式**: 使用预定义的类名 `.table-base`。

```html
<!-- ✅ 推荐 -->
<table class="table-base">
  <thead>
    <tr>
      <th>列1</th>
      <th>列2</th>
    </tr>
  </thead>
  <tbody>
    <!-- ... -->
  </tbody>
</table>
```

### 卡片变量

```css
--card-padding
--card-radius
--card-border-width
--card-border-color
--card-bg-color
--card-shadow
--card-shadow-hover
--card-transition
```

**推荐使用方式**: 使用预定义的类名 `.card-base`。

```html
<!-- ✅ 推荐 -->
<div class="card-base">
  <h3>卡片标题</h3>
  <p>卡片内容</p>
</div>
```

---

## 布局变量

```css
--layout-sidebar-width           /* 侧边栏宽度 */
--layout-sidebar-collapsed-width /* 侧边栏折叠宽度 */
--layout-header-height           /* 头部高度 */
--layout-content-padding         /* 内容区域边距 */
--layout-content-max-width       /* 内容最大宽度 */
```

### 使用示例

```css
.sidebar {
  width: var(--layout-sidebar-width);
}

.header {
  height: var(--layout-header-height);
}

.content {
  padding: var(--layout-content-padding);
  max-width: var(--layout-content-max-width);
  margin: 0 auto;
}
```

---

## 字体系统变量

### 字体族

```css
--font-family  /* 系统字体栈 */
```

### 字号

```css
--font-size-base   /* 基础字号 (14px / 0.875rem) */
--font-size-sm     /* 小字号 (12px / 0.75rem) */
--font-size-lg     /* 大字号 (16px / 1rem) */
--font-size-xl     /* 超大字号 (18px / 1.125rem) */
--font-size-2xl    /* 2倍字号 (24px / 1.5rem) */
```

### 行高

```css
--line-height-base   /* 基础行高 (1.5) */
--line-height-tight  /* 紧凑行高 (1.25) */
```

### 字重

```css
--font-weight-normal   /* 正常 (400) */
--font-weight-medium   /* 中等 (500) */
--font-weight-semibold /* 半粗 (600) */
--font-weight-bold     /* 粗体 (700) */
```

### 使用示例

```css
.title {
  font-family: var(--font-family);
  font-size: var(--font-size-2xl);
  font-weight: var(--font-weight-bold);
  line-height: var(--line-height-tight);
}

.body-text {
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  color: var(--color-text-primary);
}
```

---

## 使用方式

### 1. 在 Vue 模板中使用

#### 方式一：内联样式

```vue
<template>
  <div :style="{ 
    backgroundColor: 'var(--color-primary)', 
    color: 'var(--color-text-primary)',
    padding: 'var(--card-padding)',
    borderRadius: 'var(--card-radius)'
  }">
    内容
  </div>
</template>
```

#### 方式二：使用类名 + CSS

```vue
<template>
  <div class="custom-component">
    内容
  </div>
</template>

<style scoped>
.custom-component {
  background-color: var(--color-primary);
  color: var(--color-text-primary);
  padding: var(--card-padding);
  border-radius: var(--card-radius);
}
</style>
```

### 2. 在 CSS/SCSS 中使用

```css
/* 直接使用变量 */
.my-component {
  background-color: var(--color-primary);
  color: var(--color-text-primary);
  border: var(--border-width) solid var(--color-border);
  border-radius: var(--radius);
  padding: var(--card-padding);
}

/* 在伪类中使用 */
.my-button:hover {
  background-color: var(--btn-primary-hover-bg-color);
}

/* 在媒体查询中使用 */
@media (max-width: 768px) {
  .sidebar {
    width: var(--layout-sidebar-collapsed-width);
  }
}
```

### 3. 在 JavaScript/TypeScript 中使用

```typescript
// 获取 CSS 变量值
const root = document.documentElement
const primaryColor = getComputedStyle(root).getPropertyValue('--color-primary')

// 设置 CSS 变量值（通常不需要，由主题系统管理）
root.style.setProperty('--color-primary', '#03624C')
```

---

## 最佳实践

### ✅ 推荐做法

1. **优先使用预定义的语义化类名**
   ```html
   <!-- ✅ 好 -->
   <button class="btn-primary">按钮</button>
   <input class="input-base" />
   <div class="card-base">卡片</div>
   ```

2. **在需要自定义样式时使用变量**
   ```css
   /* ✅ 好 - 使用变量保持一致性 */
   .custom-button {
     background-color: var(--color-primary);
     border-radius: var(--radius);
   }
   
   /* ❌ 避免 - 硬编码值 */
   .custom-button {
     background-color: #03624C;
     border-radius: 0.375rem;
   }
   ```

3. **使用语义化的颜色变量**
   ```css
   /* ✅ 好 - 使用语义化变量 */
   .success-message {
     color: var(--color-success);
   }
   
   /* ❌ 避免 - 直接使用主色 */
   .success-message {
     color: var(--color-primary);
   }
   ```

### ❌ 避免的做法

1. **不要硬编码颜色值**
   ```css
   /* ❌ 错误 */
   .component {
     color: #03624C;  /* 应该使用 var(--color-primary) */
   }
   ```

2. **不要直接修改 CSS 变量（除非在主题设置页面）**
   ```typescript
   /* ❌ 错误 - 应该通过主题配置系统修改 */
   document.documentElement.style.setProperty('--color-primary', '#ff0000')
   ```

---

## 完整示例

### 示例 1: 自定义卡片组件

```vue
<template>
  <div class="custom-card">
    <h3 class="custom-card-title">{{ title }}</h3>
    <p class="custom-card-content">{{ content }}</p>
    <button class="btn-primary">操作</button>
  </div>
</template>

<style scoped>
.custom-card {
  padding: var(--card-padding);
  border-radius: var(--card-radius);
  border: var(--card-border-width) solid var(--card-border-color);
  background-color: var(--card-bg-color);
  box-shadow: var(--card-shadow);
  transition: var(--card-transition);
}

.custom-card:hover {
  box-shadow: var(--card-shadow-hover);
}

.custom-card-title {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  margin-bottom: 0.5rem;
}

.custom-card-content {
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  color: var(--color-text-secondary);
  margin-bottom: 1rem;
}
</style>
```

### 示例 2: 状态提示组件

```vue
<template>
  <div :class="['status-message', `status-${type}`]">
    <span class="status-icon">{{ icon }}</span>
    <span class="status-text">{{ message }}</span>
  </div>
</template>

<script setup lang="ts">
defineProps<{
  type: 'success' | 'warning' | 'error' | 'info'
  message: string
  icon?: string
}>()
</script>

<style scoped>
.status-message {
  padding: var(--card-padding);
  border-radius: var(--radius);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.status-success {
  background-color: var(--color-bg-secondary);
  color: var(--color-success);
  border: 1px solid var(--color-success);
}

.status-warning {
  background-color: var(--color-bg-secondary);
  color: var(--color-warning);
  border: 1px solid var(--color-warning);
}

.status-error {
  background-color: var(--color-bg-secondary);
  color: var(--color-error);
  border: 1px solid var(--color-error);
}

.status-info {
  background-color: var(--color-bg-secondary);
  color: var(--color-info);
  border: 1px solid var(--color-info);
}

.status-text {
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
}
</style>
```

---

## 相关文档

- [UI设计规范](../01_规范指南/03_UI设计规范.md) - 了解设计原则
- [Button按钮组件](./01_Button按钮.md) - 按钮组件使用
- [组件画廊](../../views/admin/dev/ComponentGallery.vue) - 后台主题配置

---

## 注意事项

1. **变量值会在应用启动时从数据库加载**，如果数据库中没有配置，会使用 `theme.ts` 中的默认值
2. **所有变量都是全局的**，修改会影响整个应用
3. **变量值应该通过后台主题设置页面修改**，而不是在代码中硬编码
4. **使用变量时要注意浏览器兼容性**，CSS 变量在现代浏览器中都有良好支持

---

**最后更新**: 2025年
