# 表单元素设置

本文档详细说明了表单元素（下拉框、复选框、单选框、开关）的设置系统。

## 概述

表单元素设置允许您自定义各种表单控件的外观和行为，包括：
- **下拉框（Select）**：尺寸、圆角、颜色等
- **复选框（Checkbox）**：大小、圆角、选中状态颜色等
- **单选框（Radio）**：大小、边框、选中圆点样式等
- **开关（Switch）**：宽度、高度、开关状态颜色等

## 访问路径

```
开发管理 → 组件画廊 → 基础控件 → 表单元素
```

## 配置结构

### 1. 下拉框（Select）

#### 尺寸与形状

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `height` | string | `2.5rem` | 下拉框高度 |
| `paddingX` | string | `0.75rem` | 水平内边距 |
| `radius` | string | `0.375rem` | 圆角大小 |
| `borderWidth` | string | `1px` | 边框宽度 |

#### 颜色设置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `backgroundColor` | string | `#ffffff` | 背景颜色 |
| `textColor` | string | `#111827` | 文字颜色 |
| `borderColor` | string | `#211f20` | 边框颜色 |
| `focusBorderColor` | string | `var(--color-primary)` | 聚焦边框颜色 |
| `focusRingColor` | string | `var(--color-primary)` | 聚焦光圈颜色 |

#### 配置示例

```typescript
form: {
  select: {
    height: '2.5rem',
    paddingX: '0.75rem',
    radius: '0.375rem',
    borderWidth: '1px',
    backgroundColor: '#ffffff',
    textColor: '#111827',
    borderColor: '#211f20',
    focusBorderColor: 'var(--color-primary)',
    focusRingColor: 'var(--color-primary)',
  }
}
```

### 2. 复选框（Checkbox）

#### 尺寸与形状

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `size` | string | `1.25rem` | 复选框大小 |
| `radius` | string | `0.25rem` | 圆角大小 |
| `borderWidth` | string | `1px` | 边框宽度 |

#### 颜色设置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `backgroundColor` | string | `#ffffff` | 背景颜色 |
| `borderColor` | string | `#d1d5db` | 未选中边框颜色 |
| `checkedBackgroundColor` | string | `var(--color-primary)` | 选中背景颜色 |
| `checkedBorderColor` | string | `var(--color-primary)` | 选中边框颜色 |
| `checkmarkColor` | string | `#ffffff` | 勾选标记颜色 |

#### 配置示例

```typescript
form: {
  checkbox: {
    size: '1.25rem',
    radius: '0.25rem',
    borderWidth: '1px',
    backgroundColor: '#ffffff',
    borderColor: '#d1d5db',
    checkedBackgroundColor: 'var(--color-primary)',
    checkedBorderColor: 'var(--color-primary)',
    checkmarkColor: '#ffffff',
  }
}
```

### 3. 单选框（Radio）

#### 尺寸与形状

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `size` | string | `1.25rem` | 单选框大小 |
| `borderWidth` | string | `2px` | 边框宽度 |
| `dotSize` | string | `0.5rem` | 选中圆点大小 |

#### 颜色设置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `backgroundColor` | string | `#ffffff` | 背景颜色 |
| `borderColor` | string | `#d1d5db` | 未选中边框颜色 |
| `checkedBorderColor` | string | `var(--color-primary)` | 选中边框颜色 |
| `checkedDotColor` | string | `var(--color-primary)` | 选中圆点颜色 |

#### 配置示例

```typescript
form: {
  radio: {
    size: '1.25rem',
    borderWidth: '2px',
    backgroundColor: '#ffffff',
    borderColor: '#d1d5db',
    checkedBorderColor: 'var(--color-primary)',
    checkedDotColor: 'var(--color-primary)',
    dotSize: '0.5rem',
  }
}
```

### 4. 开关（Switch）

#### 尺寸与形状

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `width` | string | `2.75rem` | 开关宽度 |
| `height` | string | `1.5rem` | 开关高度 |

#### 颜色设置

| 配置项 | 类型 | 默认值 | 说明 |
|--------|------|--------|------|
| `offBackgroundColor` | string | `#d1d5db` | 关闭背景颜色 |
| `onBackgroundColor` | string | `var(--color-primary)` | 开启背景颜色 |
| `thumbColor` | string | `#ffffff` | 滑块颜色 |

#### 配置示例

```typescript
form: {
  switch: {
    width: '2.75rem',
    height: '1.5rem',
    offBackgroundColor: '#d1d5db',
    onBackgroundColor: 'var(--color-primary)',
    thumbColor: '#ffffff',
  }
}
```

## CSS 变量

表单元素设置会生成以下 CSS 变量：

### 下拉框变量

```css
--select-height: 2.5rem;
--select-padding-x: 0.75rem;
--select-radius: 0.375rem;
--select-border-width: 1px;
--select-border-color: #211f20;
--select-bg-color: #ffffff;
--select-text-color: #111827;
--select-focus-border-color: var(--color-primary);
--select-focus-ring-color: var(--color-primary);
```

### 复选框变量

```css
--checkbox-size: 1.25rem;
--checkbox-radius: 0.25rem;
--checkbox-border-width: 1px;
--checkbox-border-color: #d1d5db;
--checkbox-bg-color: #ffffff;
--checkbox-checked-bg-color: var(--color-primary);
--checkbox-checked-border-color: var(--color-primary);
--checkbox-checkmark-color: #ffffff;
```

### 单选框变量

```css
--radio-size: 1.25rem;
--radio-border-width: 2px;
--radio-border-color: #d1d5db;
--radio-bg-color: #ffffff;
--radio-checked-border-color: var(--color-primary);
--radio-checked-dot-color: var(--color-primary);
--radio-dot-size: 0.5rem;
```

### 开关变量

```css
--switch-width: 2.75rem;
--switch-height: 1.5rem;
--switch-off-bg-color: #d1d5db;
--switch-on-bg-color: var(--color-primary);
--switch-thumb-color: #ffffff;
```

## 使用示例

### 在 HTML 中使用

```html
<!-- 下拉框 -->
<select class="select-base">
  <option>选项 1</option>
  <option>选项 2</option>
  <option>选项 3</option>
</select>

<!-- 复选框 -->
<label>
  <input type="checkbox" class="checkbox-base" />
  <span>复选框标签</span>
</label>

<!-- 单选框 -->
<label>
  <input type="radio" name="group" class="radio-base" />
  <span>单选框标签</span>
</label>

<!-- 开关 -->
<div class="switch-base" :class="{ 'on': isOn }"></div>
```

### 在 Vue 组件中使用

```vue
<template>
  <div class="form-container">
    <!-- 下拉框 -->
    <div class="form-field">
      <label>选择选项</label>
      <select v-model="selectedOption" class="select-base">
        <option value="1">选项 1</option>
        <option value="2">选项 2</option>
        <option value="3">选项 3</option>
      </select>
    </div>

    <!-- 复选框 -->
    <div class="form-field">
      <label class="checkbox-label">
        <input v-model="isChecked" type="checkbox" class="checkbox-base" />
        <span>我同意条款和条件</span>
      </label>
    </div>

    <!-- 单选框组 -->
    <div class="form-field">
      <label>选择一个选项</label>
      <label class="radio-label">
        <input v-model="radioValue" type="radio" value="a" class="radio-base" />
        <span>选项 A</span>
      </label>
      <label class="radio-label">
        <input v-model="radioValue" type="radio" value="b" class="radio-base" />
        <span>选项 B</span>
      </label>
    </div>

    <!-- 开关 -->
    <div class="form-field">
      <label>启用功能</label>
      <div 
        class="switch-base" 
        :class="{ 'on': isEnabled }"
        @click="isEnabled = !isEnabled"
      ></div>
    </div>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const selectedOption = ref('1')
const isChecked = ref(false)
const radioValue = ref('a')
const isEnabled = ref(false)
</script>

<style scoped>
.form-container {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.form-field {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.checkbox-label,
.radio-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
}
</style>
```

## 最佳实践

### 1. 尺寸选择

**下拉框高度**：
- **小 (2rem)**：紧凑型表单，节省空间
- **标准 (2.5rem)**：推荐使用，适合大多数场景
- **大 (3rem)**：需要更好可读性或触摸友好

**复选框/单选框大小**：
- **小 (1rem)**：紧凑布局
- **标准 (1.25rem)**：推荐使用
- **大 (1.5rem)**：强调重要选项

**开关尺寸**：
- **小 (2.5rem × 1.25rem)**：紧凑型
- **标准 (2.75rem × 1.5rem)**：推荐使用
- **大 (3rem × 1.75rem)**：更易操作

### 2. 圆角设计

- **无圆角 (0)**：现代、极简风格
- **小圆角 (0.25rem)**：微妙的柔和感
- **标准圆角 (0.375rem)**：推荐使用，平衡美观与功能
- **大圆角 (0.5rem)**：友好、亲和的风格
- **全圆角 (9999px)**：胶囊形状，适合开关和标签

### 3. 颜色搭配

**主色应用**：
- 聚焦状态使用主色强调
- 选中状态使用主色表示激活
- 保持与全局主题一致

**对比度**：
- 确保文字与背景有足够对比度（至少 4.5:1）
- 边框颜色应与背景有明显区分
- 选中状态应清晰可见

**状态区分**：
- 未选中：使用中性灰色
- 选中：使用主色
- 禁用：使用低透明度

### 4. 交互反馈

- 聚焦时显示光圈效果
- 悬停时改变光标样式
- 选中时提供视觉反馈
- 禁用时降低透明度并禁止交互

### 5. 可访问性

- 为所有表单元素提供清晰的标签
- 使用 `<label>` 元素关联输入控件
- 确保键盘可访问性
- 提供足够的点击/触摸区域（至少 44×44px）

## 常见问题

### Q1: 如何让表单元素与全局主题自动同步？

A: 使用 `var(--color-primary)` 作为颜色值，这样当全局主题改变时，表单元素会自动更新。

```typescript
form: {
  checkbox: {
    checkedBackgroundColor: 'var(--color-primary)', // 自动同步
  }
}
```

### Q2: 如何自定义复选框的勾选图标？

A: 复选框使用 SVG 作为勾选标记，您可以在 `style.css` 中修改 `.checkbox-base:checked` 的 `background-image` 属性。

### Q3: 开关的滑块大小如何控制？

A: 滑块大小自动基于开关高度计算：`height - 4px`。如果需要更大的滑块，增加开关高度即可。

### Q4: 如何实现表单验证样式？

A: 可以添加额外的 CSS 类来表示验证状态：

```css
.select-base.error {
  border-color: var(--color-error);
}

.select-base.success {
  border-color: var(--color-success);
}
```

### Q5: 表单元素在移动端如何优化？

A: 建议：
- 增大表单元素尺寸（至少 44×44px）
- 增加内边距和间距
- 使用较大的字号
- 确保足够的触摸区域

## 技术细节

### 实现原理

1. **配置管理**：所有表单元素配置存储在 `theme.ts` 的 `form` 对象中
2. **CSS 变量应用**：通过 `utils/theme.ts` 的 `applyTheme` 函数将配置转换为 CSS 变量
3. **样式绑定**：全局样式类（`.select-base`、`.checkbox-base` 等）使用 CSS 变量
4. **实时预览**：`FormSettings.vue` 提供实时预览功能

### 文件结构

```
apps/web/src/
├── config/
│   └── theme.ts                    # 表单元素配置定义
├── utils/
│   └── theme.ts                    # CSS 变量应用逻辑
├── style.css                       # 表单元素基础样式
└── views/admin/dev/components/settings/
    └── FormSettings.vue            # 表单元素设置界面
```

## 更新日志

### v1.0.0 (2025-11-24)

- ✅ 完成表单元素设置系统
- ✅ 支持下拉框、复选框、单选框、开关
- ✅ 实时预览功能
- ✅ CSS 变量绑定
- ✅ 统一的设置布局
- ✅ 完整的文档说明

## 相关文档

- [按钮设置](./04_按钮设置.md)
- [输入框设置](./05_输入框设置.md)
- [数据表格设置](./06_数据表格设置.md)
- [组件设置系统](./04_组件设置系统.md)

