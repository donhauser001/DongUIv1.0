# 滑竿组件 (Range Slider)

## 概述

滑竿组件用于让用户通过拖动滑块来选择一个数值范围内的值。我们提供了统一的样式类 `.range-base` 和 `.range-field`，确保所有滑竿组件都符合系统的设计规范。

## 基础用法

### 简单滑竿

```vue
<template>
  <input 
    v-model.number="value" 
    type="range" 
    min="0" 
    max="100" 
    step="1" 
    class="range-base" 
  />
</template>

<script setup>
import { ref } from 'vue'
const value = ref(50)
</script>
```

### 带数值显示的滑竿

推荐使用 `.range-field` 容器类来包裹滑竿和数值显示：

```vue
<template>
  <div class="range-field">
    <input 
      v-model.number="opacity" 
      type="range" 
      min="0" 
      max="1" 
      step="0.05" 
      class="range-base" 
    />
    <span class="range-field-value">{{ opacity }}</span>
  </div>
</template>

<script setup>
import { ref } from 'vue'
const opacity = ref(0.5)
</script>
```

## 样式类说明

### `.range-base`

滑竿的基础样式类，包含：
- 轨道样式（高度、圆角、背景色）
- 滑块样式（尺寸、颜色、阴影）
- 交互效果（悬停、激活状态）
- 跨浏览器兼容（Webkit 和 Firefox）

**特性：**
- 轨道高度：`6px`
- 轨道背景：`var(--color-bg-tertiary)`
- 滑块尺寸：`18px × 18px`
- 滑块颜色：`var(--color-primary)`（跟随主题色）
- 滑块边框：`2px solid #ffffff`
- 悬停效果：滑块放大 `1.1` 倍，颜色加深 `10%`
- 激活效果：滑块缩小到 `1.05` 倍

### `.range-field`

滑竿字段容器，用于包裹滑竿和数值显示：
- 使用 Flexbox 布局
- 垂直居中对齐
- 间距：`0.75rem`

### `.range-field-value`

数值显示样式：
- 字号：`0.875rem`
- 颜色：`var(--color-text-primary)`
- 字重：`500`
- 最小宽度：`3rem`
- 文本右对齐

## 完整示例

### 表单中的滑竿

```vue
<template>
  <div class="settings-field">
    <label class="settings-field-label">遮罩透明度</label>
    <div class="range-field">
      <input 
        v-model.number="config.modal.overlayOpacity" 
        type="range" 
        min="0" 
        max="1" 
        step="0.05" 
        class="range-base" 
      />
      <span class="range-field-value">{{ config.modal.overlayOpacity }}</span>
    </div>
  </div>
</template>
```

### 自定义范围和步长

```vue
<template>
  <!-- 百分比滑竿 (0-100, 步长 5) -->
  <div class="range-field">
    <input 
      v-model.number="percentage" 
      type="range" 
      min="0" 
      max="100" 
      step="5" 
      class="range-base" 
    />
    <span class="range-field-value">{{ percentage }}%</span>
  </div>

  <!-- 字号滑竿 (12-24, 步长 1) -->
  <div class="range-field">
    <input 
      v-model.number="fontSize" 
      type="range" 
      min="12" 
      max="24" 
      step="1" 
      class="range-base" 
    />
    <span class="range-field-value">{{ fontSize }}px</span>
  </div>

  <!-- 小数滑竿 (0-2, 步长 0.1) -->
  <div class="range-field">
    <input 
      v-model.number="scale" 
      type="range" 
      min="0" 
      max="2" 
      step="0.1" 
      class="range-base" 
    />
    <span class="range-field-value">{{ scale.toFixed(1) }}x</span>
  </div>
</template>

<script setup>
import { ref } from 'vue'
const percentage = ref(50)
const fontSize = ref(16)
const scale = ref(1.0)
</script>
```

## 响应式行为

滑竿组件会自动适应容器宽度（`width: 100%`）。在 `.range-field` 容器中，滑竿会占据除数值显示外的所有可用空间。

```vue
<template>
  <!-- 滑竿会自动填充容器宽度 -->
  <div style="width: 300px;">
    <div class="range-field">
      <input type="range" class="range-base" />
      <span class="range-field-value">50</span>
    </div>
  </div>
</template>
```

## 主题适配

滑竿组件使用 CSS 变量，会自动跟随系统主题：

- **滑块颜色**：`var(--color-primary)` - 跟随主题主色
- **轨道背景**：`var(--color-bg-tertiary)` - 跟随主题背景色
- **数值颜色**：`var(--color-text-primary)` - 跟随主题文字色

当用户切换主题配色方案（如从"孟加拉绿"切换到"活力橙"）时，滑块颜色会自动更新。

## 浏览器兼容性

滑竿组件针对不同浏览器提供了完整的样式支持：

- **Webkit 内核**（Chrome, Safari, Edge）：使用 `::-webkit-slider-thumb` 和 `::-webkit-slider-runnable-track`
- **Firefox**：使用 `::-moz-range-thumb` 和 `::-moz-range-track`

所有主流浏览器都能获得一致的视觉效果和交互体验。

## 最佳实践

### 1. 始终显示当前值

为了提供更好的用户体验，建议始终在滑竿旁边显示当前值：

```vue
<!-- ✅ 推荐 -->
<div class="range-field">
  <input type="range" class="range-base" v-model.number="value" />
  <span class="range-field-value">{{ value }}</span>
</div>

<!-- ❌ 不推荐 -->
<input type="range" class="range-base" v-model.number="value" />
```

### 2. 使用合适的步长

根据数值的精度需求选择合适的步长：

```vue
<!-- 整数值 -->
<input type="range" min="0" max="100" step="1" />

<!-- 百分比（5% 步长） -->
<input type="range" min="0" max="100" step="5" />

<!-- 小数值（0.05 步长） -->
<input type="range" min="0" max="1" step="0.05" />
```

### 3. 添加单位标识

在数值显示中添加单位，让用户更清楚数值的含义：

```vue
<span class="range-field-value">{{ value }}%</span>
<span class="range-field-value">{{ value }}px</span>
<span class="range-field-value">{{ value.toFixed(1) }}x</span>
```

### 4. 配合标签使用

在表单中使用滑竿时，配合 `settings-field` 和 `settings-field-label` 类：

```vue
<div class="settings-field">
  <label class="settings-field-label">透明度</label>
  <div class="range-field">
    <input type="range" class="range-base" v-model.number="opacity" />
    <span class="range-field-value">{{ opacity }}</span>
  </div>
</div>
```

## 常见问题

### Q: 如何修改滑块的颜色？

A: 滑块颜色由 `--color-primary` CSS 变量控制，会自动跟随主题。如果需要自定义，可以在组件画廊的"全局配色"中修改主色。

### Q: 如何让滑竿更宽或更窄？

A: 滑竿默认占据 100% 容器宽度。你可以通过设置父容器的宽度来控制滑竿的宽度：

```vue
<div style="width: 200px;">
  <input type="range" class="range-base" />
</div>
```

### Q: 数值显示可以自定义格式吗？

A: 可以！你可以使用计算属性或方法来格式化显示的数值：

```vue
<template>
  <span class="range-field-value">{{ formattedValue }}</span>
</template>

<script setup>
import { computed } from 'vue'
const value = ref(0.5)
const formattedValue = computed(() => `${(value.value * 100).toFixed(0)}%`)
</script>
```

## 相关文件

- `apps/web/src/style.css` - 滑竿基础样式定义
- `apps/web/src/views/admin/dev/components/settings/ModalSettings.vue` - 使用示例

## 更新日志

### v1.0.0 (2024-11-24)

- ✅ 初始版本
- ✅ 添加 `.range-base` 基础样式类
- ✅ 添加 `.range-field` 容器类
- ✅ 添加 `.range-field-value` 数值显示类
- ✅ 支持主题色跟随
- ✅ 跨浏览器兼容（Webkit + Firefox）
- ✅ 交互动画（悬停、激活状态）

